<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROV Random Teams & Heroes</title>
    <style>
        body {
            background-image: url('king_together_bg.jpg');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
            margin: 0;
            position: relative;
        }

        #bg-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }
        
        /* เพิ่ม CSS สำหรับการดีเลย์การแสดงผล */
        .container {
            width: 90%;
            max-width: 1200px;
            background-color: rgba(26, 26, 26, 0.9);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
            text-align: center;
            z-index: 1;
            opacity: 0; /* ซ่อนตอนแรก */
            transition: opacity 0.5s ease-in-out; /* เพิ่มการเปลี่ยนภาพให้ดูสมูท */
        }
        
        h1 {
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .teams-display {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        .team-card {
            background-color: rgba(42, 42, 42, 0.9);
            border-radius: 10px;
            padding: 20px;
            margin: 10px;
            width: 250px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            text-align: left;
        }
        .team-card h2 {
            color: #ffcc00;
            margin-bottom: 15px;
            text-align: center;
        }
        .team-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .team-card li {
            padding: 8px 0;
            border-bottom: 1px solid #333;
        }
        .team-card li:last-child {
            border-bottom: none;
        }
        .player-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .hero-name {
            color: #ffcc00;
            font-size: 1.1em;
            font-weight: bold;
        }
        .role-name {
            font-size: 0.9em;
            color: #aaa;
        }
        .player-name {
            font-size: 1.1em;
            color: #fff;
            font-weight: bold;
        }
        .control-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .control-buttons button {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        #randomize-btn {
            background-image: linear-gradient(to right, #ff8c00, #ffcc00);
            color: #000;
        }
        #stop-btn {
            background-color: #e74c3c;
            color: #fff;
        }
        .back-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #555;
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
    </style>
</head>
<body>

<video autoplay loop muted playsinline id="bg-video">
    <source src="lv_0_20250827221308.mp4" type="video/mp4">
</video>

<div class="container">
    <h1>ผลการสุ่ม</h1>
    <div class="control-buttons">
        <button id="randomize-btn">สุ่ม</button>
        <button id="stop-btn" style="display:none;">หยุด</button>
    </div>
    <div class="teams-display" id="teams-display">
        </div>
    <button class="back-button" onclick="history.back()">กลับ</button>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const teamsDisplay = document.getElementById('teams-display');
        const randomizeBtn = document.getElementById('randomize-btn');
        const stopBtn = document.getElementById('stop-btn');
        const container = document.querySelector('.container');
        let randomizationInterval;

        const roles = ['Abyssal Dragon Lane', 'Dark Slayer Lane', 'Mid Lane', 'Jungle', 'Support'];

        // *** สำคัญ: กรุณาแก้ไขตรงนี้เพื่อใส่รายชื่อฮีโร่ ROV ทั้ง 124 ตัว ***
        const allHeroes = [
            'Tel\'Annas', 'Yorn', 'Violet', 'Valhein', 'Hayate', 'Nakroth', 'Murad', 'Zanis', 'Zephys', 'Wukong',
            'Fennik', 'Lindis', 'Eland\'orr', 'Lubu', 'Maloch', 'Arthur', 'Gildur', 'Aleister', 'Krixi', 'Natalya',
            'Mina', 'Ormarr', 'Thane', 'Grakk', 'Chaugnar', 'Cresht', 'Alice', 'Payna', 'Kahlii', 'Veera',
            'Diaochan', 'Ignis', 'Lauriel', 'Tulen', 'Raz', 'Ilumia', 'Jinnar', 'Preyta', 'Marja', 'Zata',
            'Darcy', 'Ryoma', 'Zill', 'Superman', 'Batman', 'Wonder Woman', 'The Flash', 'Joker', 'Bright', 'Allain',
            'Ata', 'TeeMee', 'Dirak', 'Paine', 'Lorion', 'Isharr', 'Errol', 'Qi', 'Richter', 'Florentino',
            'Sinestrea', 'Wiro', 'Omen', 'Yena', 'Volkath', 'Laville', 'Aoi', 'Rouie', 'Skud', 'Moren',
            'Riktor', 'Veres', 'Brunhilda', 'Keera', 'Capheny', 'Elsu', 'Wisp', 'Kaine', 'Dextra', 'Eva',
            'Thorne', 'Yan', 'Annette', 'Krizzix', 'Zip', 'Xeniel', 'Khaden', 'Kaine', 'Yue', 'Celica',
            'Teeri', 'Helen', 'Anes', 'Bonny', 'Zill', 'Zanis', 'Yorn', 'Yena', 'Wisp', 'Wiro', 'Wonder Woman', 'Wukong', 'Violet',
            'Veera', 'Valhein', 'Tulen', 'Thorne', 'Thane', 'Teeri', 'TeeMee', 'Tel\'Annas', 'Superman', 'Sinestrea', 'Skud',
            'Rouie', 'Richter', 'Ryoma', 'Raz', 'Qi', 'Paine', 'Payna', 'Ormarr', 'Omen', 'Nakroth', 'Murad', 'Moren',
            'Mina', 'Marja', 'Maloch', 'Lubu', 'Lorion', 'Lindis', 'Liliana', 'Lauriel', 'Krixi', 'Krizzix', 'Keera',
            'Kaine', 'Khaden', 'Joker', 'Jinnar', 'Joker', 'Isharr', 'Ignis', 'Ilumia', 'Hayate', 'Helen', 'Grakk', 'Gildur',
            'Gildur', 'Florentino', 'Fennik', 'Errol', 'Eland\'orr', 'Elsu', 'Dextra', 'Diaochan', 'Dirak', 'Darcy', 'Cresht', 'Chaugnar',
            'Celica', 'Capheny', 'Brunhilda', 'Bright', 'Bonny', 'Batman', 'Arthur', 'Ata', 'Annette', 'Anes', 'Allain', 'Alice',
            'Aleister', 'Aoi'
        ];
        
        const urlParams = new URLSearchParams(window.location.search);
        const playersString = urlParams.get('players');
        const players = JSON.parse(decodeURIComponent(playersString));

        const shuffledPlayers = players.sort(() => Math.random() - 0.5);
        const shuffledHeroes = [...allHeroes].sort(() => Math.random() - 0.5);
        const shuffledRoles = [...roles].sort(() => Math.random() - 0.5);
        
        function shuffleArrays(arr1, arr2) {
            for (let i = arr1.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr1[i], arr1[j]] = [arr1[j], arr1[i]];
            }
            for (let i = arr2.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr2[i], arr2[j]] = [arr2[j], arr2[i]];
            }
        }
        
        function displayResults(heroes, roles) {
            teamsDisplay.innerHTML = '';
            const numTeams = Math.floor(shuffledPlayers.length / 5);

            for (let i = 0; i < numTeams; i++) {
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';
                teamCard.innerHTML = `<h2>ทีม ${i + 1}</h2><ul></ul>`;
                const playerList = teamCard.querySelector('ul');

                for (let j = 0; j < 5; j++) {
                    const playerIndex = (i * 5) + j;
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `
                        <div class="player-info">
                            <span class="role-name">${roles[j]}:</span>
                            <span class="player-name">${shuffledPlayers[playerIndex]}</span>
                            <span class="hero-name">Hero: ${heroes[playerIndex]}</span>
                        </div>
                    `;
                    playerList.appendChild(listItem);
                }
                teamsDisplay.appendChild(teamCard);
            }
        }
        
        randomizeBtn.addEventListener('click', () => {
            randomizeBtn.style.display = 'none';
            stopBtn.style.display = 'block';
            
            randomizationInterval = setInterval(() => {
                shuffleArrays(shuffledHeroes, shuffledRoles);
                displayResults(shuffledHeroes, shuffledRoles);
            }, 50);
        });

        stopBtn.addEventListener('click', () => {
            clearInterval(randomizationInterval);
            stopBtn.style.display = 'none';
            randomizeBtn.style.display = 'block';
            
            displayResults(shuffledHeroes, shuffledRoles);
        });
        
        // ดีเลย์การแสดงผล 0.5 วินาที
        setTimeout(() => {
            container.style.opacity = '1';
            displayResults(shuffledHeroes, shuffledRoles);
        }, 500); // 500 มิลลิวินาที = 0.5 วินาที
    });
</script>

</body>
</html>
